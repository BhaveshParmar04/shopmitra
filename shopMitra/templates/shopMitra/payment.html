

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>

<button id="rzp-button1" class="btn btn-success">
    Pay Now
</button>

<script>
var options = {
    "key": "{{ razorpay_key }}",
    "amount": "{{ amount }}",
    "currency": "INR",
    "name": "ShopMitra",
    "description": "Order Payment",
    "order_id": "{{ razorpay_order_id }}",

    "method": {
        "upi": true,
        "card": true,
        "netbanking": true,
        "wallet": true
    },

    "handler": function (response){
        var form = document.createElement("form");
        form.method = "POST";
        form.action = "{% url 'payment_success' %}";

        var csrf = document.createElement("input");
        csrf.type = "hidden";
        csrf.name = "csrfmiddlewaretoken";
        csrf.value = "{{ csrf_token }}";
        var paymentId = document.createElement("input");
        paymentId.type = "hidden";
        paymentId.name = "razorpay_payment_id";
        paymentId.value = response.razorpay_payment_id;

        var orderId = document.createElement("input");
        orderId.type = "hidden";
        orderId.name = "razorpay_order_id";
        orderId.value = response.razorpay_order_id;

        var signature = document.createElement("input");
        signature.type = "hidden";
        signature.name = "razorpay_signature";
        signature.value = response.razorpay_signature;

        form.appendChild(csrf);
        form.appendChild(paymentId);
        form.appendChild(orderId);
        form.appendChild(signature);

        document.body.appendChild(form);
        form.submit();
    }
};

var rzp1 = new Razorpay(options);
document.getElementById('rzp-button1').onclick = function(e){
    rzp1.open();
    e.preventDefault();
}
</script>

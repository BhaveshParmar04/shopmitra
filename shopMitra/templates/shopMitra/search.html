{% extends 'shopMitra/basic.html' %}
{% block title %} Search - shopMitra {% endblock %}
{% load static %}

{% block style %}
<style>
  .card img {
    width: 100%;
    height: 250px;
    object-fit: contain;
  }
</style>
{% endblock %}

{% block content %}
<div class="container my-5">

  <h4 class="mb-4">
    Search results for "<strong>{{ query }}</strong>"
  </h4>

  {% if products %}
  <div class="row gx-2 gy-4">

    {% for product in products %}
    <div class="col-6 col-md-4 col-lg-3">
      <div class="card align-items-center h-100">

        <img src="{{ product.image.url }}" class="card-img-top img-fluid">

        <div class="card-body text-center">
          <h5 class="card-title"
              id="prname{{product.id}}"
              data-fullname="{{ product.product_name }}">
            {{ product.product_name|slice:"0:20" }}...
          </h5>

          <p class="card-text">
            {{ product.description|slice:"0:25" }}...
          </p>

          <h6 class="card-subtitle mb-2 text-muted">
            â‚¹<span id="pricepr{{ product.id }}">{{ product.price }}</span>
          </h6>

          <span id="price{{ product.id }}" class="price">
            <button
              class="btn btn-primary btn-sm cart"
              id="add-to-cart{{product.id}}">
              Add to cart
            </button>
          </span>

          <a href="{% url 'ProductView' product.id %}">
            <button class="btn btn-outline-primary btn-sm mt-1">
              QuickView
            </button>
          </a>
        </div>

      </div>
    </div>
    {% endfor %}

  </div>
  {% else %}
    <div class="alert alert-warning">
      No products found for "{{ query }}"
    </div>
  {% endif %}

</div>
{% endblock %}
